{
  "hash": "705681a7b985e45bfd1f499eac30638c",
  "result": {
    "markdown": "---\ntitle: \"Importation des données\"\ntitle-block-banner: false\ndescription: | \n  Petite description de cette page.\n# à changer\ndate: \"2022-12-21\"\n# Modifier les détails que vous voulez\nauthor:\n  - name: \"Amélie Levasseur-Raymond\"\n    # Votre site web perso ou github\n    url: https://amelie-lr.github.io/\n    # les champs d'affiliation sont optionnels, vous pouvez les\n    # comment out en ajoutant un # devant.\n    affiliation: FAS1002\n    affiliation-url: https://FAS1002.github.io/A22\n    # changer pour votre propre orcid id\n    # https://orcid.org/ pour vous inscrire.\n    # orcid: 0000-0000-0000-0000\n\n# TRUE == Générer une citation pour cette page précise. Pour enlever, mettre false.\ncitation: true\n# Inclure les références que vous utilisez dans vos rapports. Je conseille Zotero pour construire\n# ce fichier ou de connecter RStudio directement pour pouvoir citer avec @nom-de-reference.\nbibliography: references.bib\n---\n\n\n\n::: callout-important\nN'oubliez pas d'inclure vos références sur chacune des pages!\n:::\n\nPar exemple:\n\n> Les données proviennent entre autres de @owidenergy.\n\n\n::: {.cell}\n\n:::\n\n\n## Téléchargement des données\n\n### Our World in Data - Energy\n\n> Les données proviennent de @owidenergy.\n\n\n::: {.cell hash='import_cache/html/download_owi_257366a59c1b7d2b99767d3cb575279a'}\n\n```{.r .cell-code}\n# chemin relatif vers le dossier qui contient les données brutes\nbase_path <- path(\"data\", \"raw\")\n\nurl_energy <- \"https://nyc3.digitaloceanspaces.com/owid-public/data/energy/owid-energy-data.csv\"\n\n# personnaliser le nom du fichier téléchargé en y ajoutant la date du jour\nfname_energy <- paste(today(), \"owid-energy-data.csv\", sep = \"_\")\n# établir le chemin relatif complet de notre fichier personnalisé téléchargé\nfpath_energy <- path(base_path, fname_energy)\n\n# télécharger les données seulement si elles n'ont pas déjà été téléchargées aujourd'hui\n# inspiré de : https://stackoverflow.com/questions/14904983/how-do-i-check-the-existence-of-a-downloaded-file\n# télécharge seulement si le fichier en date du jour n'existe pas en supprimant l'ancienne version\nif (!file.exists(fpath_energy)) {\n    file.remove(paste(base_path, dir(path = base_path, pattern = \"*_owid-energy-data.csv\"), sep = \"/\"))\n    download.file(url = url_energy, \n              destfile = fpath_energy)\n}\n```\n:::\n\n\nLe fichier a été téléchargé ici : **data/raw/2022-12-12_owid-energy-data.csv**\n\n### Gapminder - Life Expectancy at Birth\n\n\n::: {.cell hash='import_cache/html/download_gm_9e720b9fc6331f3eae2996d169bb71f9'}\n\n```{.r .cell-code}\n# url prise de Download lastest version : Excel file\nurl_life <- \"https://docs.google.com/spreadsheets/d/1RheSon1-q4vFc3AGyupVPH6ptEByE-VtnjOCselU0PE/export?format=xlsx\"\n\n# pour ne pas avoir de demande d'authentification Google\ngs4_deauth()\n\n# date sans le jour (année-mois)\ntoday_month <- paste(year(today()), month(today()), sep = \"-\")\n# personnaliser le nom du fichier téléchargé en y ajoutant la date du jour\nfname_life <- paste(today_month, \"gm-life-expectancy-data.xlsx\", sep = \"_\")\n# établir le chemin relatif complet de notre fichier personnalisé téléchargé\nfpath_life <- path(base_path, fname_life)\n\nif (!file.exists(fpath_life)) {\n    file.remove(paste(base_path, dir(path = base_path, pattern = \"*_gm-life-expectancy-data.xlsx\"), sep = \"/\"))\n    download.file(url = url_life, \n              destfile = fpath_life)\n}\n```\n:::\n\n\nLe fichier a été téléchargé ici : **data/raw/2022-12_gm-life-expectancy-data.xlsx**\n\nNous constatons maintenant que notre dossier contient les fichiers suivants :  \ndata/raw/2022-12-12_owid-energy-data.csv, data/raw/2022-12_gm-life-expectancy-data.xlsx\n\n## Premier coup d'oeil\n\nVoyons d'abord plus en détails ce que nous avons comme données.\n\n\n::: {.cell}\n\n```{.r .cell-code}\ndata_energy <- as_tibble(read_csv(file = fpath_energy))\n\ndata_life <- as_tibble(read_excel(fpath_life, sheet = \"data-for-countries-etc-by-year\", range = NULL, trim_ws = TRUE, col_names = TRUE))\n```\n:::\n\n\n### Énergie\n\n\n::: {.cell}\n\n```{.r .cell-code}\nkable(slice_sample(data_energy, n = 10))\n```\n\n::: {.cell-output-display}\n|country                  | year|iso_code | population|          gdp| biofuel_cons_change_pct| biofuel_cons_change_twh| biofuel_cons_per_capita| biofuel_consumption| biofuel_elec_per_capita| biofuel_electricity| biofuel_share_elec| biofuel_share_energy| carbon_intensity_elec| coal_cons_change_pct| coal_cons_change_twh| coal_cons_per_capita| coal_consumption| coal_elec_per_capita| coal_electricity| coal_prod_change_pct| coal_prod_change_twh| coal_prod_per_capita| coal_production| coal_share_elec| coal_share_energy| electricity_demand| electricity_generation| energy_cons_change_pct| energy_cons_change_twh| energy_per_capita| energy_per_gdp| fossil_cons_change_pct| fossil_cons_change_twh| fossil_elec_per_capita| fossil_electricity| fossil_energy_per_capita| fossil_fuel_consumption| fossil_share_elec| fossil_share_energy| gas_cons_change_pct| gas_cons_change_twh| gas_consumption| gas_elec_per_capita| gas_electricity| gas_energy_per_capita| gas_prod_change_pct| gas_prod_change_twh| gas_prod_per_capita| gas_production| gas_share_elec| gas_share_energy| greenhouse_gas_emissions| hydro_cons_change_pct| hydro_cons_change_twh| hydro_consumption| hydro_elec_per_capita| hydro_electricity| hydro_energy_per_capita| hydro_share_elec| hydro_share_energy| low_carbon_cons_change_pct| low_carbon_cons_change_twh| low_carbon_consumption| low_carbon_elec_per_capita| low_carbon_electricity| low_carbon_energy_per_capita| low_carbon_share_elec| low_carbon_share_energy| net_elec_imports| net_elec_imports_share_demand| nuclear_cons_change_pct| nuclear_cons_change_twh| nuclear_consumption| nuclear_elec_per_capita| nuclear_electricity| nuclear_energy_per_capita| nuclear_share_elec| nuclear_share_energy| oil_cons_change_pct| oil_cons_change_twh| oil_consumption| oil_elec_per_capita| oil_electricity| oil_energy_per_capita| oil_prod_change_pct| oil_prod_change_twh| oil_prod_per_capita| oil_production| oil_share_elec| oil_share_energy| other_renewable_consumption| other_renewable_electricity| other_renewable_exc_biofuel_electricity| other_renewables_cons_change_pct| other_renewables_cons_change_twh| other_renewables_elec_per_capita| other_renewables_elec_per_capita_exc_biofuel| other_renewables_energy_per_capita| other_renewables_share_elec| other_renewables_share_elec_exc_biofuel| other_renewables_share_energy| per_capita_electricity| primary_energy_consumption| renewables_cons_change_pct| renewables_cons_change_twh| renewables_consumption| renewables_elec_per_capita| renewables_electricity| renewables_energy_per_capita| renewables_share_elec| renewables_share_energy| solar_cons_change_pct| solar_cons_change_twh| solar_consumption| solar_elec_per_capita| solar_electricity| solar_energy_per_capita| solar_share_elec| solar_share_energy| wind_cons_change_pct| wind_cons_change_twh| wind_consumption| wind_elec_per_capita| wind_electricity| wind_energy_per_capita| wind_share_elec| wind_share_energy|\n|:------------------------|----:|:--------|----------:|------------:|-----------------------:|-----------------------:|-----------------------:|-------------------:|-----------------------:|-------------------:|------------------:|--------------------:|---------------------:|--------------------:|--------------------:|--------------------:|----------------:|--------------------:|----------------:|--------------------:|--------------------:|--------------------:|---------------:|---------------:|-----------------:|------------------:|----------------------:|----------------------:|----------------------:|-----------------:|--------------:|----------------------:|----------------------:|----------------------:|------------------:|------------------------:|-----------------------:|-----------------:|-------------------:|-------------------:|-------------------:|---------------:|-------------------:|---------------:|---------------------:|-------------------:|-------------------:|-------------------:|--------------:|--------------:|----------------:|------------------------:|---------------------:|---------------------:|-----------------:|---------------------:|-----------------:|-----------------------:|----------------:|------------------:|--------------------------:|--------------------------:|----------------------:|--------------------------:|----------------------:|----------------------------:|---------------------:|-----------------------:|----------------:|-----------------------------:|-----------------------:|-----------------------:|-------------------:|-----------------------:|-------------------:|-------------------------:|------------------:|--------------------:|-------------------:|-------------------:|---------------:|-------------------:|---------------:|---------------------:|-------------------:|-------------------:|-------------------:|--------------:|--------------:|----------------:|---------------------------:|---------------------------:|---------------------------------------:|--------------------------------:|--------------------------------:|--------------------------------:|--------------------------------------------:|----------------------------------:|---------------------------:|---------------------------------------:|-----------------------------:|----------------------:|--------------------------:|--------------------------:|--------------------------:|----------------------:|--------------------------:|----------------------:|----------------------------:|---------------------:|-----------------------:|---------------------:|---------------------:|-----------------:|---------------------:|-----------------:|-----------------------:|----------------:|------------------:|--------------------:|--------------------:|----------------:|--------------------:|----------------:|----------------------:|---------------:|-----------------:|\n|Uruguay                  | 1994|URY      |    3201149|  39036334080|                      NA|                      NA|                      NA|                  NA|                      NA|                  NA|                 NA|                   NA|                    NA|                   NA|                   NA|                   NA|               NA|                   NA|               NA|                   NA|                    0|                    0|               0|              NA|                NA|                 NA|                     NA|                 -1.195|                 -0.494|         12748.989|          1.045|                     NA|                     NA|                     NA|                 NA|                       NA|                      NA|                NA|                  NA|                  NA|                  NA|              NA|                  NA|              NA|                    NA|                  NA|               0.000|               0.000|          0.000|             NA|               NA|                       NA|                    NA|                    NA|                NA|                    NA|                NA|                      NA|               NA|                 NA|                         NA|                         NA|                     NA|                         NA|                     NA|                           NA|                    NA|                      NA|               NA|                            NA|                      NA|                      NA|                  NA|                      NA|                  NA|                        NA|                 NA|                   NA|                  NA|                  NA|              NA|                  NA|              NA|                    NA|                  NA|               0.000|               0.000|          0.000|             NA|               NA|                          NA|                          NA|                                      NA|                               NA|                               NA|                               NA|                                           NA|                                 NA|                          NA|                                      NA|                            NA|                     NA|                     40.811|                         NA|                         NA|                     NA|                         NA|                     NA|                           NA|                    NA|                      NA|                    NA|                    NA|                NA|                    NA|                NA|                      NA|               NA|                 NA|                   NA|                   NA|               NA|                   NA|               NA|                     NA|              NA|                NA|\n|Guinea                   | 1999|GIN      |    8054745|   7849296384|                      NA|                      NA|                      NA|                  NA|                      NA|                  NA|                 NA|                   NA|                    NA|                   NA|                   NA|                   NA|               NA|                   NA|               NA|                   NA|                    0|                    0|               0|              NA|                NA|                 NA|                     NA|                  4.289|                  0.254|           767.785|          0.788|                     NA|                     NA|                     NA|                 NA|                       NA|                      NA|                NA|                  NA|                  NA|                  NA|              NA|                  NA|              NA|                    NA|                  NA|               0.000|               0.000|          0.000|             NA|               NA|                       NA|                    NA|                    NA|                NA|                    NA|                NA|                      NA|               NA|                 NA|                         NA|                         NA|                     NA|                         NA|                     NA|                           NA|                    NA|                      NA|               NA|                            NA|                      NA|                      NA|                  NA|                      NA|                  NA|                        NA|                 NA|                   NA|                  NA|                  NA|              NA|                  NA|              NA|                    NA|                  NA|               0.000|               0.000|          0.000|             NA|               NA|                          NA|                          NA|                                      NA|                               NA|                               NA|                               NA|                                           NA|                                 NA|                          NA|                                      NA|                            NA|                     NA|                      6.184|                         NA|                         NA|                     NA|                         NA|                     NA|                           NA|                    NA|                      NA|                    NA|                    NA|                NA|                    NA|                NA|                      NA|               NA|                 NA|                   NA|                   NA|               NA|                   NA|               NA|                     NA|              NA|                NA|\n|United Arab Emirates     | 1938|ARE      |      61798|           NA|                      NA|                      NA|                      NA|                  NA|                      NA|                  NA|                 NA|                   NA|                    NA|                   NA|                   NA|                   NA|               NA|                   NA|               NA|                   NA|                   NA|                   NA|              NA|              NA|                NA|                 NA|                     NA|                     NA|                     NA|                NA|             NA|                     NA|                     NA|                     NA|                 NA|                       NA|                      NA|                NA|                  NA|                  NA|                  NA|              NA|                  NA|              NA|                    NA|                  NA|               0.000|               0.000|          0.000|             NA|               NA|                       NA|                    NA|                    NA|                NA|                    NA|                NA|                      NA|               NA|                 NA|                         NA|                         NA|                     NA|                         NA|                     NA|                           NA|                    NA|                      NA|               NA|                            NA|                      NA|                      NA|                  NA|                      NA|                  NA|                        NA|                 NA|                   NA|                  NA|                  NA|              NA|                  NA|              NA|                    NA|                  NA|               0.000|               0.000|          0.000|             NA|               NA|                          NA|                          NA|                                      NA|                               NA|                               NA|                               NA|                                           NA|                                 NA|                          NA|                                      NA|                            NA|                     NA|                         NA|                         NA|                         NA|                     NA|                         NA|                     NA|                           NA|                    NA|                      NA|                    NA|                    NA|                NA|                    NA|                NA|                      NA|               NA|                 NA|                   NA|                   NA|               NA|                   NA|               NA|                     NA|              NA|                NA|\n|Mauritius                | 1995|MUS      |    1128676|  14115228672|                      NA|                      NA|                      NA|                  NA|                      NA|                  NA|                 NA|                   NA|                    NA|                   NA|                   NA|                   NA|               NA|                   NA|               NA|                   NA|                    0|                    0|               0|              NA|                NA|                 NA|                     NA|                  7.087|                  0.685|          9164.354|          0.733|                     NA|                     NA|                     NA|                 NA|                       NA|                      NA|                NA|                  NA|                  NA|                  NA|              NA|                  NA|              NA|                    NA|                  NA|               0.000|               0.000|          0.000|             NA|               NA|                       NA|                    NA|                    NA|                NA|                    NA|                NA|                      NA|               NA|                 NA|                         NA|                         NA|                     NA|                         NA|                     NA|                           NA|                    NA|                      NA|               NA|                            NA|                      NA|                      NA|                  NA|                      NA|                  NA|                        NA|                 NA|                   NA|                  NA|                  NA|              NA|                  NA|              NA|                    NA|                  NA|               0.000|               0.000|          0.000|             NA|               NA|                          NA|                          NA|                                      NA|                               NA|                               NA|                               NA|                                           NA|                                 NA|                          NA|                                      NA|                            NA|                     NA|                     10.344|                         NA|                         NA|                     NA|                         NA|                     NA|                           NA|                    NA|                      NA|                    NA|                    NA|                NA|                    NA|                NA|                      NA|               NA|                 NA|                   NA|                   NA|               NA|                   NA|               NA|                     NA|              NA|                NA|\n|Other South America (BP) | 1978|NA       |         NA|           NA|                      NA|                      NA|                      NA|                  NA|                      NA|                  NA|                 NA|                   NA|                    NA|              -81.125|               -0.205|                   NA|            0.048|                   NA|               NA|                   NA|                   NA|                   NA|              NA|              NA|             0.064|                 NA|                     NA|                 10.463|                  6.999|                NA|             NA|                 12.513|                  6.872|                     NA|                 NA|                       NA|                   61.79|                NA|              83.628|              92.031|               1.573|           3.283|                  NA|              NA|                    NA|              14.405|               1.803|                  NA|         14.317|             NA|            4.444|                       NA|                 1.571|                 0.184|            11.918|                    NA|             4.031|                      NA|               NA|             16.131|                      1.097|                      0.127|                 12.097|                         NA|                  4.087|                           NA|                    NA|                  16.372|               NA|                            NA|                      NA|                      NA|                  NA|                      NA|                  NA|                        NA|                 NA|                   NA|              10.392|               5.503|          58.459|                  NA|              NA|                    NA|              -6.237|              -1.982|                  NA|         29.792|             NA|           79.119|                       0.179|                       0.056|                                      NA|                          -24.324|                           -0.057|                               NA|                                           NA|                                 NA|                          NA|                                      NA|                         0.242|                     NA|                     73.887|                      1.097|                      0.127|                 12.097|                         NA|                  4.087|                           NA|                    NA|                  16.372|                    NA|                     0|                 0|                    NA|                 0|                      NA|               NA|                  0|                   NA|                    0|                0|                   NA|                0|                     NA|              NA|                 0|\n|Bolivia                  | 2005|BOL      |    9232301|  40332390400|                      NA|                      NA|                      NA|                  NA|                  63.906|                0.59|              12.58|                   NA|               266.525|                   NA|                   NA|                   NA|               NA|                    0|                0|                   NA|                    0|                    0|               0|               0|                NA|               4.69|                   4.69|                 -2.031|                 -1.152|          6019.442|          1.378|                     NA|                     NA|                233.961|               2.16|                       NA|                      NA|            46.055|                  NA|                  NA|                  NA|              NA|             233.961|            2.16|                    NA|              23.373|              22.017|           12587.957|        116.216|         46.055|               NA|                     1.25|                    NA|                    NA|                NA|               210.132|             1.940|                      NA|           41.365|                 NA|                         NA|                         NA|                     NA|                    274.038|                  2.530|                           NA|                53.945|                      NA|                0|                             0|                      NA|                      NA|                  NA|                       0|                   0|                        NA|                  0|                   NA|                  NA|                  NA|              NA|               0.000|            0.00|                    NA|               2.761|               0.907|            3656.769|         33.760|              0|               NA|                          NA|                       0.590|                                       0|                               NA|                               NA|                           63.906|                                            0|                                 NA|                       12.58|                                       0|                            NA|                507.999|                     55.573|                         NA|                         NA|                     NA|                    274.038|                  2.530|                           NA|                53.945|                      NA|                    NA|                    NA|                NA|                     0|                 0|                      NA|                0|                 NA|                   NA|                   NA|               NA|                    0|                0|                     NA|               0|                NA|\n|Gabon                    | 1944|GAB      |     433554|           NA|                      NA|                      NA|                      NA|                  NA|                      NA|                  NA|                 NA|                   NA|                    NA|                   NA|                   NA|                   NA|               NA|                   NA|               NA|                   NA|                   NA|                   NA|              NA|              NA|                NA|                 NA|                     NA|                     NA|                     NA|                NA|             NA|                     NA|                     NA|                     NA|                 NA|                       NA|                      NA|                NA|                  NA|                  NA|                  NA|              NA|                  NA|              NA|                    NA|                  NA|                  NA|                  NA|             NA|             NA|               NA|                       NA|                    NA|                    NA|                NA|                    NA|                NA|                      NA|               NA|                 NA|                         NA|                         NA|                     NA|                         NA|                     NA|                           NA|                    NA|                      NA|               NA|                            NA|                      NA|                      NA|                  NA|                      NA|                  NA|                        NA|                 NA|                   NA|                  NA|                  NA|              NA|                  NA|              NA|                    NA|                  NA|               0.000|               0.000|          0.000|             NA|               NA|                          NA|                          NA|                                      NA|                               NA|                               NA|                               NA|                                           NA|                                 NA|                          NA|                                      NA|                            NA|                     NA|                         NA|                         NA|                         NA|                     NA|                         NA|                     NA|                           NA|                    NA|                      NA|                    NA|                    NA|                NA|                    NA|                NA|                      NA|               NA|                 NA|                   NA|                   NA|               NA|                   NA|               NA|                     NA|              NA|                NA|\n|Syria                    | 1988|SYR      |   11719064| 115309895680|                      NA|                      NA|                      NA|                  NA|                      NA|                  NA|                 NA|                   NA|                    NA|                   NA|                   NA|                   NA|               NA|                   NA|               NA|                   NA|                    0|                    0|               0|              NA|                NA|                 NA|                     NA|                  4.871|                  6.154|         11305.890|          1.149|                     NA|                     NA|                     NA|                 NA|                       NA|                      NA|                NA|                  NA|                  NA|                  NA|              NA|                  NA|              NA|                    NA|             136.554|               5.099|             753.772|          8.833|             NA|               NA|                       NA|                    NA|                    NA|                NA|                    NA|                NA|                      NA|               NA|                 NA|                         NA|                         NA|                     NA|                         NA|                     NA|                           NA|                    NA|                      NA|               NA|                            NA|                      NA|                      NA|                  NA|                      NA|                  NA|                        NA|                 NA|                   NA|                  NA|                  NA|              NA|                  NA|              NA|                    NA|              16.449|              21.967|           13270.163|        155.514|             NA|               NA|                          NA|                          NA|                                      NA|                               NA|                               NA|                               NA|                                           NA|                                 NA|                          NA|                                      NA|                            NA|                     NA|                    132.494|                         NA|                         NA|                     NA|                         NA|                     NA|                           NA|                    NA|                      NA|                    NA|                    NA|                NA|                    NA|                NA|                      NA|               NA|                 NA|                   NA|                   NA|               NA|                   NA|               NA|                     NA|              NA|                NA|\n|Seychelles               | 2008|SYC      |      90450|   1625803008|                      NA|                      NA|                      NA|                  NA|                   0.000|                0.00|               0.00|                   NA|               720.000|                   NA|                   NA|                   NA|               NA|                    0|                0|                   NA|                    0|                    0|               0|               0|                NA|               0.25|                   0.25|                  9.009|                  0.352|         47031.742|          2.617|                     NA|                     NA|               2763.958|               0.25|                       NA|                      NA|           100.000|                  NA|                  NA|                  NA|              NA|               0.000|            0.00|                    NA|                  NA|               0.000|               0.000|          0.000|          0.000|               NA|                     0.18|                    NA|                    NA|                NA|                 0.000|             0.000|                      NA|            0.000|                 NA|                         NA|                         NA|                     NA|                      0.000|                  0.000|                           NA|                 0.000|                      NA|                0|                             0|                      NA|                      NA|                  NA|                       0|                   0|                        NA|                  0|                   NA|                  NA|                  NA|              NA|            2763.958|            0.25|                    NA|                  NA|               0.000|               0.000|          0.000|            100|               NA|                          NA|                       0.000|                                       0|                               NA|                               NA|                            0.000|                                            0|                                 NA|                        0.00|                                       0|                            NA|               2763.958|                      4.254|                         NA|                         NA|                     NA|                      0.000|                  0.000|                           NA|                 0.000|                      NA|                    NA|                    NA|                NA|                     0|                 0|                      NA|                0|                 NA|                   NA|                   NA|               NA|                    0|                0|                     NA|               0|                NA|\n|Bahrain                  | 1955|BHR      |     133580|    522835552|                      NA|                      NA|                      NA|                  NA|                      NA|                  NA|                 NA|                   NA|                    NA|                   NA|                   NA|                   NA|               NA|                   NA|               NA|                   NA|                   NA|                   NA|              NA|              NA|                NA|                 NA|                     NA|                     NA|                     NA|                NA|             NA|                     NA|                     NA|                     NA|                 NA|                       NA|                      NA|                NA|                  NA|                  NA|                  NA|              NA|                  NA|              NA|                    NA|                  NA|               0.000|               0.000|          0.000|             NA|               NA|                       NA|                    NA|                    NA|                NA|                    NA|                NA|                      NA|               NA|                 NA|                         NA|                         NA|                     NA|                         NA|                     NA|                           NA|                    NA|                      NA|               NA|                            NA|                      NA|                      NA|                  NA|                      NA|                  NA|                        NA|                 NA|                   NA|                  NA|                  NA|              NA|                  NA|              NA|                    NA|              -0.067|              -0.012|          130770.023|         17.468|             NA|               NA|                          NA|                          NA|                                      NA|                               NA|                               NA|                               NA|                                           NA|                                 NA|                          NA|                                      NA|                            NA|                     NA|                         NA|                         NA|                         NA|                     NA|                         NA|                     NA|                           NA|                    NA|                      NA|                    NA|                    NA|                NA|                    NA|                NA|                      NA|               NA|                 NA|                   NA|                   NA|               NA|                   NA|               NA|                     NA|              NA|                NA|\n:::\n:::\n\n\nPremière question à se poser : Utiliserons-nous toutes ces variables?  \nSûrement pas, d'autant plus qu'il semble y avoir beaucoup d'informations manquantes. Nous y reviendrons...\n\n### Espérance de vie\n\n\n::: {.cell}\n\n```{.r .cell-code}\nkable(slice_sample(data_life, n = 10))\n```\n\n::: {.cell-output-display}\n|geo |name             | time| Life expectancy|\n|:---|:----------------|----:|---------------:|\n|egy |Egypt            | 1946|           36.77|\n|lka |Sri Lanka        | 1968|           65.05|\n|nld |Netherlands      | 1865|           36.37|\n|dza |Algeria          | 2009|           74.16|\n|cod |Congo, Dem. Rep. | 1836|           31.60|\n|col |Colombia         | 1880|           32.47|\n|ecu |Ecuador          | 2034|           79.24|\n|ury |Uruguay          | 1873|           32.89|\n|grd |Grenada          | 2061|           78.76|\n|tgo |Togo             | 1971|           51.91|\n:::\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\n# quelques info utiles sur le fichier\n#file.info(fpath_energy)\n\n# paste avec le file.path quand on ouvre\n```\n:::\n\n\n\n## Nettoyage des données\n\nÀ première vue, les données sembles être bien arrangées et *tidy*. Rien de trop grave ne saute aux yeux.  \nUniformisons cependant les noms des colonnes entre les deux jeux de données en les nettoyant un peu par le fait même.\n\n\n::: {.cell}\n\n```{.r .cell-code}\n# renommer les titres de colonnes de data_life pour concorder avec ceux de data_energy\ndata_life_clean <- data_life %>%\n    dplyr::rename(life_expectancy = `Life expectancy`,\n                  year = `time`,\n                  country = `name`,\n                  iso_code = `geo`)\n```\n:::\n\n\nLes codes ISO des pays devraient aussi être uniformisés pour les avoir en majuscules dans les deux jeux.\n\n\n::: {.cell}\n\n```{.r .cell-code}\n# convertir les codes ISO du jeux data_life pour qu'ils soient en majuscules\n# inspiré de : https://stackoverflow.com/questions/16516593/convert-from-lowercase-to-uppercase-all-values-in-all-character-variables-in-dat\ndata_life_clean$iso_code <- toupper(data_life_clean$iso_code)\n```\n:::\n\n\nXxxx \n\n\n::: {.cell}\n\n```{.r .cell-code}\n# pour remplir les cases vides de Province/Territoire\n#table[table == \"\"] <- NA\n```\n:::\n\n\n\n## Manipulations\n\nNous ne conservons que les variables qui nous intéressent du jeux Energy. Nous nous attarderons donc seulement à l'énergie **consommée**.\n\n\n::: {.cell}\n\n```{.r .cell-code}\ndata_energy_cons <- data_energy %>%\n    select(iso_code,\n           country,\n           year,\n           population,\n           contains(\"cons\")\n           )\n\nkable(slice_sample(data_energy_cons, n = 10))\n```\n\n::: {.cell-output-display}\n|iso_code |country            | year| population| biofuel_cons_change_pct| biofuel_cons_change_twh| biofuel_cons_per_capita| biofuel_consumption| coal_cons_change_pct| coal_cons_change_twh| coal_cons_per_capita| coal_consumption| energy_cons_change_pct| energy_cons_change_twh| fossil_cons_change_pct| fossil_cons_change_twh| fossil_fuel_consumption| gas_cons_change_pct| gas_cons_change_twh| gas_consumption| hydro_cons_change_pct| hydro_cons_change_twh| hydro_consumption| low_carbon_cons_change_pct| low_carbon_cons_change_twh| low_carbon_consumption| nuclear_cons_change_pct| nuclear_cons_change_twh| nuclear_consumption| oil_cons_change_pct| oil_cons_change_twh| oil_consumption| other_renewable_consumption| other_renewables_cons_change_pct| other_renewables_cons_change_twh| primary_energy_consumption| renewables_cons_change_pct| renewables_cons_change_twh| renewables_consumption| solar_cons_change_pct| solar_cons_change_twh| solar_consumption| wind_cons_change_pct| wind_cons_change_twh| wind_consumption|\n|:--------|:------------------|----:|----------:|-----------------------:|-----------------------:|-----------------------:|-------------------:|--------------------:|--------------------:|--------------------:|----------------:|----------------------:|----------------------:|----------------------:|----------------------:|-----------------------:|-------------------:|-------------------:|---------------:|---------------------:|---------------------:|-----------------:|--------------------------:|--------------------------:|----------------------:|-----------------------:|-----------------------:|-------------------:|-------------------:|-------------------:|---------------:|---------------------------:|--------------------------------:|--------------------------------:|--------------------------:|--------------------------:|--------------------------:|----------------------:|---------------------:|---------------------:|-----------------:|--------------------:|--------------------:|----------------:|\n|NA       |North America      | 1997|  467453759|                      NA|                      NA|                      NA|                  NA|                2.213|              137.838|            13620.767|         6367.079|                  0.824|                251.957|                  1.584|                408.648|               26211.781|               0.835|              60.712|        7331.801|                -0.373|                -8.106|          2165.122|                     -3.530|                   -163.064|               4568.056|                  -6.924|                -159.182|            2139.888|               1.708|             210.100|       12512.901|                      251.37|                            1.617|                            4.066|                  30818.646|                     -0.171|                     -3.881|               2428.168|                -1.372|                -0.022|             1.613|                1.830|                0.181|           10.063|\n|MTQ      |Martinique         | 2011|     391886|                      NA|                      NA|                      NA|                  NA|                   NA|                   NA|                   NA|               NA|                  3.948|                  0.392|                     NA|                     NA|                      NA|                  NA|                  NA|              NA|                    NA|                    NA|                NA|                         NA|                         NA|                     NA|                      NA|                      NA|                  NA|                  NA|                  NA|              NA|                          NA|                               NA|                               NA|                     10.325|                         NA|                         NA|                     NA|                    NA|                    NA|                NA|                   NA|                   NA|               NA|\n|BRN      |Brunei             | 1908|      21818|                      NA|                      NA|                      NA|                  NA|                   NA|                   NA|                   NA|               NA|                     NA|                     NA|                     NA|                     NA|                      NA|                  NA|                  NA|              NA|                    NA|                    NA|                NA|                         NA|                         NA|                     NA|                      NA|                      NA|                  NA|                  NA|                  NA|              NA|                          NA|                               NA|                               NA|                         NA|                         NA|                         NA|                     NA|                    NA|                    NA|                NA|                   NA|                   NA|               NA|\n|GRC      |Greece             | 2017|   10569449|                      NA|                      NA|                      NA|                  NA|              -95.683|              -48.504|              207.029|            2.188|                -12.991|                -39.301|                -13.889|                -36.193|                 224.394|              20.599|               8.235|          48.213|               -28.513|                -4.293|            10.545|                     -7.332|                     -3.117|                 36.893|                      NA|                   0.000|               0.000|               2.399|               4.076|         173.993|                        0.99|                           13.149|                            0.115|                    263.228|                     -7.332|                     -3.117|                 36.893|                 1.564|                 0.102|            10.622|                7.598|                0.959|           14.736|\n|CRI      |Costa Rica         | 1989|    3039015|                      NA|                      NA|                      NA|                  NA|                   NA|                   NA|                   NA|               NA|                  8.832|                  1.805|                     NA|                     NA|                      NA|                  NA|                  NA|              NA|                    NA|                    NA|                NA|                         NA|                         NA|                     NA|                      NA|                      NA|                  NA|                  NA|                  NA|              NA|                          NA|                               NA|                               NA|                     22.237|                         NA|                         NA|                     NA|                    NA|                    NA|                NA|                   NA|                   NA|               NA|\n|DOM      |Dominican Republic | 2015|   10281675|                      NA|                      NA|                      NA|                  NA|                   NA|                   NA|                   NA|               NA|                 10.884|                  9.555|                     NA|                     NA|                      NA|                  NA|                  NA|              NA|                    NA|                    NA|                NA|                         NA|                         NA|                     NA|                      NA|                      NA|                  NA|                  NA|                  NA|              NA|                          NA|                               NA|                               NA|                     97.343|                         NA|                         NA|                     NA|                    NA|                    NA|                NA|                   NA|                   NA|               NA|\n|LBY      |Libya              | 1917|     652804|                      NA|                      NA|                      NA|                  NA|                   NA|                   NA|                   NA|               NA|                     NA|                     NA|                     NA|                     NA|                      NA|                  NA|                  NA|              NA|                    NA|                    NA|                NA|                         NA|                         NA|                     NA|                      NA|                      NA|                  NA|                  NA|                  NA|              NA|                          NA|                               NA|                               NA|                         NA|                         NA|                         NA|                     NA|                    NA|                    NA|                NA|                   NA|                   NA|               NA|\n|AUT      |Austria            | 1970|    7516238|                      NA|                      NA|                      NA|                  NA|                7.543|                3.918|             7431.133|           55.854|                 14.520|                 32.223|                 10.844|                 18.704|                 191.196|              21.299|               4.969|          28.298|                27.346|                13.518|            62.953|                     27.346|                     13.518|                 62.953|                      NA|                   0.000|               0.000|              10.098|               9.818|         107.044|                        0.00|                               NA|                            0.000|                    254.149|                     27.346|                     13.518|                 62.953|                    NA|                 0.000|             0.000|                   NA|                0.000|            0.000|\n|CYP      |Cyprus             | 1985|     703694|                      NA|                      NA|                      NA|                  NA|                   NA|                1.082|             1537.017|            1.082|                  7.555|                  0.953|                  7.555|                  0.953|                  13.565|                  NA|               0.000|           0.000|                    NA|                 0.000|             0.000|                         NA|                      0.000|                  0.000|                      NA|                   0.000|               0.000|              -1.020|              -0.129|          12.484|                        0.00|                               NA|                            0.000|                     13.565|                         NA|                      0.000|                  0.000|                    NA|                 0.000|             0.000|                   NA|                0.000|            0.000|\n|CHL      |Chile              | 2020|   19116208|                      NA|                      NA|                      NA|                  NA|              -16.006|              -13.939|             3826.375|           73.146|                 -6.639|                -31.998|                 -9.609|                -35.128|                 330.459|              -4.263|              -2.776|          62.354|                 1.309|                 0.529|            57.045|                      3.550|                      3.129|                119.497|                      NA|                   0.000|               0.000|              -8.629|             -18.413|         194.959|                       27.74|                           -8.429|                           -2.601|                    449.956|                      3.550|                      3.129|                119.497|                20.866|                 3.392|            19.999|               14.444|                1.810|           14.713|\n:::\n:::\n\n\nDéjà beaucoup mieux, nous sommes passé de 128 à 45 variables. \nMais il y encore encore beaucoup de bruit, réduisons encore un peu plus.\n\n\n::: {.cell}\n\n```{.r .cell-code}\ndata_energy_cons <- data_energy_cons %>%\n    select(iso_code,\n           country,\n           year,\n           population,\n           contains(\"consumption\")\n           )\n\nkable(slice_sample(data_energy_cons, n = 10))\n```\n\n::: {.cell-output-display}\n|iso_code |country         | year| population| biofuel_consumption| coal_consumption| fossil_fuel_consumption| gas_consumption| hydro_consumption| low_carbon_consumption| nuclear_consumption| oil_consumption| other_renewable_consumption| primary_energy_consumption| renewables_consumption| solar_consumption| wind_consumption|\n|:--------|:---------------|----:|----------:|-------------------:|----------------:|-----------------------:|---------------:|-----------------:|----------------------:|-------------------:|---------------:|---------------------------:|--------------------------:|----------------------:|-----------------:|----------------:|\n|HND      |Honduras        | 2006|    7634295|                  NA|               NA|                      NA|              NA|                NA|                     NA|                  NA|              NA|                          NA|                     30.885|                     NA|                NA|               NA|\n|MDV      |Maldives        | 1987|     203024|                  NA|               NA|                      NA|              NA|                NA|                     NA|                  NA|              NA|                          NA|                      0.286|                     NA|                NA|               NA|\n|NA       |Asia            | 1950| 1404414956|                  NA|               NA|                      NA|              NA|                NA|                     NA|                  NA|              NA|                          NA|                         NA|                     NA|                NA|               NA|\n|NIC      |Nicaragua       | 2013|    6062462|                  NA|               NA|                      NA|              NA|                NA|                     NA|                  NA|              NA|                          NA|                     24.429|                     NA|                NA|               NA|\n|NER      |Niger           | 1941|    2179883|                  NA|               NA|                      NA|              NA|                NA|                     NA|                  NA|              NA|                          NA|                         NA|                     NA|                NA|               NA|\n|SWZ      |Eswatini        | 2007|    1042651|                  NA|               NA|                      NA|              NA|                NA|                     NA|                  NA|              NA|                          NA|                      6.260|                     NA|                NA|               NA|\n|NA       |Eurasia (Shift) | 1994|         NA|                  NA|               NA|                      NA|              NA|                NA|                     NA|                  NA|              NA|                          NA|                         NA|                     NA|                NA|               NA|\n|VEN      |Venezuela       | 1953|    6226290|                  NA|               NA|                      NA|              NA|                NA|                     NA|                  NA|              NA|                          NA|                         NA|                     NA|                NA|               NA|\n|TWN      |Taiwan          | 1911|    3245910|                  NA|               NA|                      NA|              NA|                NA|                     NA|                  NA|              NA|                          NA|                         NA|                     NA|                NA|               NA|\n|BTN      |Bhutan          | 2018|     754396|                  NA|               NA|                      NA|              NA|                NA|                     NA|                  NA|              NA|                          NA|                     17.636|                     NA|                NA|               NA|\n:::\n:::\n",
    "supporting": [],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {},
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}